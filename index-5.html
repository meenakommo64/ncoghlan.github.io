<!DOCTYPE html><html lang="en">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <meta charset="utf-8">
    <meta name="description" content="Efficiency (a virtue) is the child of laziness and greed (both vices), while
much of our economic activity is devoted to preventing boredom in the idle
time created by increases in efficiency. To be human is to be a strange
creature indeed :)
">
    <meta name="author" content="Nick Coghlan">
    <title>Curious Efficiency (old posts page 5) | Curious Efficiency</title>
    
            <link href="assets/css/bootstrap.min.css" rel="stylesheet" type="text/css">
            <link href="assets/css/bootstrap-responsive.min.css" rel="stylesheet" type="text/css">
        <link href="assets/css/rst.css" rel="stylesheet" type="text/css">
        <link href="assets/css/code.css" rel="stylesheet" type="text/css">
        <link href="assets/css/colorbox.css" rel="stylesheet" type="text/css">
        <link href="assets/css/theme.css" rel="stylesheet" type="text/css">
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js" type="text/javascript"></script>
    <![endif]-->
            <link rel="alternate" type="application/rss+xml" title="RSS" href="rss.xml">

    
    
    
</head>
<body>
<!-- Menubar -->
<div class="navbar navbar-fixed-top">
    <div class="navbar-inner">
        <div class="container">

        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
        </a>

            <a class="brand" href=".">
            Curious Efficiency
            </a>
            <!-- Everything you want hidden at 940px or less, place within here -->
            <div class="nav-collapse collapse">
                <ul class="nav">
                    
            <li><a href="archive.html">Archives</a>
            </li><li><a href="categories/index.html">Tags</a>
            </li><li><a href="rss.xml">RSS</a>

                </li></ul>
                <ul class="nav pull-right">
                
                
                 
                </ul>
            </div>
        </div>
    </div>
</div>
<!-- End of Menubar -->
<div class="container-fluid" id="container-fluid">
    <!--Body content-->
    <div class="row-fluid">
    <div class="span2"></div>
    <div class="span8">
    
        <div class="postbox">
        <h1><a href="posts/201001justifying-python-language-changes.html">Justifying Python language changes</a>
        <small>  
             Posted: <time class="published" datetime="2010-01-29T11:59:00">2010-01-29 11:59</time>
        </small></h1>
        <hr>
        <p>Link to a mailing list post for my own benefit. Finding this again when I want to refer to it is usually a pain, so hopefully I'll remember it is linked here in the future. Either that or I'll tidy it up and turn it into a blog post in its own right.</p>
            
    <p>
        <a href="posts/201001justifying-python-language-changes.html#disqus_thread" data-disqus-identifier="cache/posts/201001justifying-python-language-changes.html">Comments</a>

        </p></div>
        <div class="postbox">
        <h1><a href="posts/201001kubuntu-dev-packages-to-build-python.html">Kubuntu dev packages to build Python</a>
        <small>  
             Posted: <time class="published" datetime="2010-01-17T12:46:00">2010-01-17 12:46</time>
        </small></h1>
        <hr>
        <p>List of all the additional packages needed for a full build of the optional Python modules in the 2.x standard library on Kubuntu 9.10:<br><br>libssl-dev (OpenSSL integration)<br>libreadline-dev (readline module integration)<br>libgdbm-dev (a DBM backend)<br>tk-dev (also brings in TCL via dependencies)<br>tk-tile (extra bit of tk needed for some of the TTK GUI functionality)<br>libsqlite3-dev (SQLite3 integration)<br>libdb4.7-dev (BSDDB integration)<br><br>(at least one of those brings in the necessary zlib build dependencies as well - probably SSL dev)<br><br>Mostly for my own reference, but if it proves useful to somebody else via a search engine, cool :)</p>
            
    <p>
        <a href="posts/201001kubuntu-dev-packages-to-build-python.html#disqus_thread" data-disqus-identifier="cache/posts/201001kubuntu-dev-packages-to-build-python.html">Comments</a>

        </p></div>
        <div class="postbox">
        <h1><a href="posts/200706what-he-said.html">What he said</a>
        <small>  
             Posted: <time class="published" datetime="2007-06-24T00:19:00">2007-06-24 00:19</time>
        </small></h1>
        <hr>
        <p>Occasionally you can come across an article which summarises your own thoughts so well, you don't really need to add anything. For me, the author's note on the linked webcomic is such an article.</p>
            
    <p>
        <a href="posts/200706what-he-said.html#disqus_thread" data-disqus-identifier="cache/posts/200706what-he-said.html">Comments</a>

        </p></div>
        <div class="postbox">
        <h1><a href="posts/200604ego-surfing.html">Ego Surfing</a>
        <small>  
             Posted: <time class="published" datetime="2006-04-07T15:49:00">2006-04-07 15:49</time>
        </small></h1>
        <hr>
        <p>So, one of Techdirt's latest stories led me back to <a href="http://www.canton.elegal.ca/archives/2006/02/internet_privac.html">this article</a> about the perils of putting too much personal info on line. Possibly even things like having the words "boredom" and "laziness" as part of a domain name you own, and then not updating the associated website for months on end, so people googling your name can wonder about your follow-through when it comes to keeping up with projects you start*.<br><br>Anyway, as a result I did a bit of googling of my own. It used to be that Google gave me <a href="http://www.boredomandlaziness.org/2004/12/google-footprint.html"> far more prominence</a> than one might expect, with buckets of references to python-list and python-dev posts. When I noticed those posts weren't on the first list of results anymore, and links for both the actor and the surfer were now included, I thought Google might have done something to give the non-mailing list results more importance, and give a result that better reflected mainstream celebrity.<br><br>A closer look though and I find that while the list of sites has changed, my original opinion still holds: even with a lot more mainstream media moving online, your Google footprint still says far more about your online presence than your fame (or lack thereof) in the offline world. And I still manage to find that fact both obvious and intriguing at the same time :)<br><br>*(FWIW, most of the stuff I write online is Python related, and ends up on the Python mailing lists rather than here)</p>
            
    <p>
        <a href="posts/200604ego-surfing.html#disqus_thread" data-disqus-identifier="cache/posts/200604ego-surfing.html">Comments</a>

        </p></div>
        <div class="postbox">
        <h1><a href="posts/200507lance-hannah.html">Lance &amp; Hannah</a>
        <small>  
             Posted: <time class="published" datetime="2005-07-20T13:04:00">2005-07-20 13:04</time>
        </small></h1>
        <hr>
        <a href="http://www.flickr.com/photos/ncoghlan/27325255/" title="photo sharing"><img alt="" src="http://photos21.flickr.com/27325255_322a99bc8e_m.jpg" style="border: solid 2px #000000;"></a><br><span style="font-size: 0.9em; margin-top: 0px;"><a href="http://www.flickr.com/photos/ncoghlan/27325255/">Lance &amp; Hannah</a> <br>Originally uploaded by <a href="http://www.flickr.com/people/ncoghlan/">Nick Coghlan</a>.</span><br clear="all"><p>Lance &amp; Hannah in Japan</p>
            
    <p>
        <a href="posts/200507lance-hannah.html#disqus_thread" data-disqus-identifier="cache/posts/200507lance-hannah.html">Comments</a>

        </p></div>
        <div class="postbox">
        <h1><a href="posts/200507grand-column.html">Grand Column</a>
        <small>  
             Posted: <time class="published" datetime="2005-07-20T12:18:00">2005-07-20 12:18</time>
        </small></h1>
        <hr>
        <p>This marble column from the Oregon Caves looks pretty impressive.</p><a href="http://www.flickr.com/photos/ncoghlan/7085212/" title="photo sharing"><img alt="" src="http://photos5.flickr.com/7085212_910b44b72d_m.jpg" style="border: solid 2px #000000;"></a><br><span style="font-size: 0.9em; margin-top: 0px;"><a href="http://www.flickr.com/photos/ncoghlan/7085212/">Grand Column</a> <br>Originally uploaded by <a href="http://www.flickr.com/people/ncoghlan/">Nick Coghlan</a>.</span><br clear="all"><br><br><p>That is, until you see it with a person in the picture for scale ;)</p><a href="http://www.flickr.com/photos/ncoghlan/7085241/" title="photo sharing"><img alt="" src="http://photos6.flickr.com/7085241_4f3207e4bb_m.jpg" style="border: solid 2px #000000;"></a><br><span style="font-size: 0.9em; margin-top: 0px;"><a href="http://www.flickr.com/photos/ncoghlan/7085241/">Or Maybe Not So Grand Column?</a> <br>Originally uploaded by <a href="http://www.flickr.com/people/ncoghlan/">Nick Coghlan</a>.</span><br clear="all">
            
    <p>
        <a href="posts/200507grand-column.html#disqus_thread" data-disqus-identifier="cache/posts/200507grand-column.html">Comments</a>

        </p></div>
        <div class="postbox">
        <h1><a href="posts/200504self-defeating-advertisements.html">Self-defeating Advertisements</a>
        <small>  
             Posted: <time class="published" datetime="2005-04-22T17:15:00">2005-04-22 17:15</time>
        </small></h1>
        <hr>
        <p>My main web browser is Mozilla Firefox. It has this lovely little extension called AdBlock, which let's me eliminate irritating content from the web pages I view. So what does that have to do with the title of the article?<br><br>Simple: A lot of the time, I <i>do not switch AdBlock on</i>. Normal banner ads, that generally stay out of my way, just plain don't bother me that much. I'm happy to let them appear on the screen (even if I don't click on them). As soon as an ad starts intruding on my web experience, though, out comes AdBlock, so I can say "Leave me the hell alone, you rude, pushy mongrels". Some ads get my attention without triggering that reflex (Absolut and IBM come to mind), because they don't block the main text, and are genuinely entertaining. Other ads (especially ones that interfere with real content) discover that getting too much of my attention can be a bad thing - it raises the irritation level enough to get me to take action. And, thanks to AdBlock's address wildcards, that will mean far more than just the one ad that triggered the block will be eliminated from my web surfing.</p>
            
    <p>
        <a href="posts/200504self-defeating-advertisements.html#disqus_thread" data-disqus-identifier="cache/posts/200504self-defeating-advertisements.html">Comments</a>

        </p></div>
        <div class="postbox">
        <h1><a href="posts/200502because-james-doesnt-remember-it.html">Because James doesn't remember it</a>
        <small>  
             Posted: <time class="published" datetime="2005-02-05T13:59:00">2005-02-05 13:59</time>
        </small></h1>
        <hr>
        <a href="http://www.thingsmygirlfriendandihavearguedabout.com/" target="_top">TMGAIHAA</a>
            
    <p>
        <a href="posts/200502because-james-doesnt-remember-it.html#disqus_thread" data-disqus-identifier="cache/posts/200502because-james-doesnt-remember-it.html">Comments</a>

        </p></div>
        <div class="postbox">
        <h1><a href="posts/200412email-blogging.html">Email Blogging</a>
        <small>  
             Posted: <time class="published" datetime="2004-12-24T09:54:00">2004-12-24 09:54</time>
        </small></h1>
        <hr>
        <p>Just checking it works. Nothing to see here. Move along.<br><br>-- <br>Nick Coghlan   |   ncoghlan@email.com   |   Brisbane, Australia<br>---------------------------------------------------------------<br>             http://boredomandlaziness.skystorm.net<br></p>
            
    <p>
        <a href="posts/200412email-blogging.html#disqus_thread" data-disqus-identifier="cache/posts/200412email-blogging.html">Comments</a>

        </p></div>
        <div class="postbox">
        <h1><a href="posts/200412type-checking-in-python.html">Type-checking in Python</a>
        <small>  
             Posted: <time class="published" datetime="2004-12-24T09:18:00">2004-12-24 09:18</time>
        </small></h1>
        <hr>
        <p>So, Guido has brought up the idea of <a href="http://www.artima.com/weblogs/viewpost.jsp?thread=85551" target="_top" title="Optional Static Typing">optional static typing</a> again, posting his current throughts on the idea, as well as noting what he sees as the problem areas.<br><br>His favoured syntax is:<br><font face="'Courier New',Courier,monospace"><br>def (a: sometype, b: sometype) -&gt; sometype:<br>  pass<br></font><br>Bleh. The main reason I dislike the current version of anonymous functions is because they embed a colon in the middle of an expression so you can probably guess how I feel about Guido's reuse of the colon here. And I've always quite liked VB's approach of using 'as' to indicate the return type of a function. Anyway, syntax aside, there's a question of what the optional type declarations are actually <i>for</i>.<br><br>Now one point to make at the start is that optional typing (checked by the VM) and optional <i>static</i> typing (checked by the compiler) are different things, and it makes some sense to do the former before doing the latter. Once you have a syntax for optional typing, making it static is merely a question of figuring out how to get the compiler to do the type check, instead of the VM. This activity would then blend in with Python's general issue of "how can we move things to the compiler to save run-time activity, without losing too much dynamism?"<br><br>Having dropped the static idea for the moment, there's the fundamental question of what does a type declaration <i>mean</i>? Python has historically relied on an approach that says "if it defines the right methods, it's OK by me". This is great for flexibility and code reuse, but plays merry hell with type inferencing systems, and can lead to some exceedingly cryptic error messages when you pass a type that doesn't provide the correct methods (or provides methods with the right names, but the wrong signatures, etc, etc).<br><br>Stealing an example I like:<br><font face="'Courier New',Courier,monospace"><br>def int_divide(x as Integer, y as Integer) as Integer:<br>  return x / y<br></font><br>We don't <i>really</i> want <font face="'Courier New',Courier,monospace">x as Integer</font> (or <font face="'Courier New',Courier,monospace">x : Integer</font> in Guido's syntax) to mean <font face="'Courier New',Courier,monospace">isinstance(x, Integer)</font> do we? After all, we'd like this function to work for builtin types, and Python's builtin types won't know anything about this interface we have created. It would be far nicer if the optional typing was just a way of formalising the 'duck typing' that Python currently relies on.<br><br>So let's consider something like the interfaces from PJE's PEAK, or Eiffel's idea of conformance (<a href="http://www.python.org/peps/pep-0246.html" target="_top">PEP 246</a>, basically). In this case, we have a builtin method <font face="'Courier New',Courier,monospace">adapt()</font> to adapt a given object to a given protocol. I'd suggest the meaning of the example should become:<br><font face="'Courier New',Courier,monospace"><br>def int_divide(x, y):<br>  x = adapt(x, Integer)<br>  y = adapt(y, Integer)<br>  return adapt(x / y, Integer)<br></font><br>Objects participate in this scheme as interfaces by definining <font face="'Courier New',Courier,monospace">__adapt__</font> special methods, and as adaptable objects by defining <font face="'Courier New',Courier,monospace">__conform__</font> special  methods. That way, interfaces and types can be written in any order, and still play well together. For instance, the existing 'adaptation methods' understood by the builtin objects' constructors (i.e. <font face="'Courier New',Courier,monospace">__int__</font>, <font face="'Courier New',Courier,monospace">__str__</font> and friends) could be incorporated into the system by having the <font face="'Courier New',Courier,monospace">__adapt__</font> methods of the relevant interfaces invoke the appropriate constructor - if the constructor throws an exception, then the adaptor method converts it to the appropriate adaptation exception.<br><br>As mentioned in PEP 246, it would also be possible to have an 'adaptation registry' which mapped from (type, interface) tuples to adaptation methods. While this doesn't really matter to the basic idea of adaptation, it's handy for people trying to integrate code which provides the right interface, but doesn't actually provide the relevant adaptation information (e.g. if it provides a <font face="'Courier New',Courier,monospace">read()</font> method, and the function uses an interface which expects that method).<br><br>For containers, it would make sense to have the interfaces be parameterisable (e.g. <font face="'Courier New',Courier,monospace">List(Integer)</font>, <font face="'Courier New',Courier,monospace">List(Number)</font>, <font face="'Courier New',Courier,monospace">List(int, long)</font> or <font face="'Courier New',Courier,monospace">List()</font> - that last example meaning, "allow a List with any types", since a list which allowed no types wouldn't be very useful). This suggests the concept of interface <i>factories</i> - classes whose instances are themselves interfaces.<br><br>For example (assume <font face="'Courier New',Courier,monospace">AdaptationError</font> is a subclass of <font face="'Courier New',Courier,monospace">TypeError</font> that is thrown when an adaptation fails):<br><font face="'Courier New',Courier,monospace"><br>class AdaptedOk(Exception): pass<br><br>class List(object):<br>  def __init__(self, *args):<br>    self._allowed_interfaces = args<br><br>  def __adapt__(self, obj):<br>    try:<br>      lst = list(obj)<br>    except Exception, ex:<br>      raise AdaptationError(str(ex))<br>    interfaces = self._allowed_interfaces<br>    if interfaces:<br>      for i, x in enumerate(lst):<br>          try:<br>            for interface in interfaces:<br>              try:<br>                lst[i] = adapt(x, interface, None)<br>                raise AdaptedOk<br>              except AdaptationError:<br>                continue<br>            raise AdaptationError("List element %s does not "<br>                   "support any allowed interface" % str(x))<br>          except AdaptedOk:<br>            pass<br>    return lst<br><br>  def __eq__(self, other):<br>    return (isinstance(other, type(self)) and<br>     (self._allowed_interfaces == other._allowed_interfaces))<br></font><br>OK, so PEP 246 combined with syntactic support would give a cleaner mechanism for <i>dynamic</i> type checking. However, it would still be nice to have some sort of static checking for optimisation purposes (if the compiler <i>knows</i> the types at compilation time, it can do all the operator lookups and so forth then, instead of waiting to do the lookups at runtime).<br><br>Well, how about a slightly different pair of special methods: <font face="'Courier New',Courier,monospace">__adapt_strict__</font> and <font face="'Courier New',Courier,monospace">__conform_strict__</font>. The result of strict adaptation <i>guarantees</i> that the result of adaptation is an actual instance of the interface. If an interface defines <font face="'Courier New',Courier,monospace">__adapt_strict__</font> without defining <font face="'Courier New',Courier,monospace">__adapt__</font>, then Python can be certain that the results of adaptation to that interface will be an instance of that interface.<br><br>For example, the builtin types might provide <font face="'Courier New',Courier,monospace">__adapt_strict__</font> methods, allowing them to be used as interfaces which guaranteed that the result was an instance of the builtin type:<br><font face="'Courier New',Courier,monospace"><br>  isinstance(adapt(x, int), int) # Always true<br>  isinstance(adapt(x, Integer), Integer) # Likely false<br>  isinstance(adapt(x, Integer), int) # Only possibly true<br></font><br>This can give us static typing, as long as the compiler can check for the existence of <font face="'Courier New',Courier,monospace">__adapt__</font> and <font face="'Courier New',Courier,monospace">__adapt_strict__</font> on the supplied interface (e.g. by assuming the names of builtins actually refer to the builtins). Here's some hypothetical implementations of  <font face="'Courier New',Courier,monospace">__adapt_strict__</font> for the builtins <font face="'Courier New',Courier,monospace">object</font> and <font face="'Courier New',Courier,monospace">list</font>:<br><font face="'Courier New',Courier,monospace"><br>def object:<br>  # The rest of object's definition is as normal<br>  # Naturally this would really be implemented in C. . .<br>  # Use a class method so any new-style class<br>  # can automatically be used for strict adaptation<br>  @classmethod <br>  def __adapt_strict__(cls, obj):<br>    if isinstance(obj, cls):<br>      return obj<br>    try:<br>      result = cls(obj)<br>    except Exception, ex:<br>      raise AdaptationError(str(ex))<br>    return result<br><br>class AdaptedOk(Exception): pass<br>def list(object):<br>  # The rest of list's definition is as normal<br>  # Naturally this would really be implemented in C. . .<br>  # Uses an instance method, so we use self<br>  # to store the list of allowed interfaces<br>  def __adapt_strict__(self, obj):<br>    try:<br>      lst = list(obj)<br>    except Exception, ex:<br>      raise AdaptationError(str(ex))<br>    if self:<br>      for i, x in enumerate(lst):<br>        try:<br>          for interface in self:<br>            try:<br>              lst[i] = adapt(x, interface, None)<br>              raise AdaptedOk<br>            except AdaptationError:<br>              continue<br>          raise AdaptationError("List element %s does not "<br>                 "support any allowed interface" % str(x))<br>        except AdaptedOk:<br>          pass<br>    return lst<br></font><br>With strict adaptation available, our earlier example of non-strict list adaptation would change to be:<br><font face="'Courier New',Courier,monospace"><br>def List(list):<br>  def __adapt__(self, obj):<br>    return self.__adapt_strict__(obj)<br></font><br>The rules for adaptation would change slightly from those suggested in the PEP:</p><ol><li>If the object is an exact instance of the interface, return it<br></li><li>Try the object's <font face="'Courier New',Courier,monospace">__conform_strict__</font> method, if it has one. If that works, return the result.<br></li><li>If the interface allows non-strict adaptation (it defines __adapt__), then try the object's <font face="'Courier New',Courier,monospace">__conform__</font> method, if it has one. If that works, return the result.<br></li><li>Try the interface's <font face="'Courier New',Courier,monospace">__adapt_strict__</font> method, if it has one. If that works, return the result.<br></li><li>Try the interface's <font face="'Courier New',Courier,monospace">__adapt__</font> method, if it has one. If that works, return the result.</li></ol><br>The new additions are steps 2 &amp; 4, and step 3 has been modified so that it is only tried if the interface implements <font face="'Courier New',Courier,monospace">__adapt__</font>. The idea of restricting step 1 to exact instances is taken from the PEP - it allows subclasses to say "I don't implement my parent's interface" by throwing an exception in its conformation method. The check for instances of subclasses has been moved to the implementation of <font face="'Courier New',Courier,monospace">object.__adapt_strict__</font>. This allows interfaces to decide how they choose to deal with subclasses.
            
    <p>
        <a href="posts/200412type-checking-in-python.html#disqus_thread" data-disqus-identifier="cache/posts/200412type-checking-in-python.html">Comments</a>

        </p></div>
    
<div>
<ul class="pager">
    <li class="previous">
        <a href="index-4.html">← Newer posts</a>
    </li><li class="next">
        <a href="index-6.html">Older posts →</a>
</li></ul>
</div>

    
       <script type="text/javascript">var disqus_shortname="boredomandlaziness";(function(){var a=document.createElement("script");a.async=true;a.type="text/javascript";a.src="http://"+disqus_shortname+".disqus.com/count.js";(document.getElementsByTagName("HEAD")[0]||document.getElementsByTagName("BODY")[0]).appendChild(a)}());</script>

    


    </div>
    </div>
    <!--End of body content-->
</div>
<div class="footerbox">
    Contents © 2013 <a href="mailto:ncoghlan@gmail.com">Nick Coghlan</a> - <a href="https://creativecommons.org/publicdomain/zero/1.0/">CC0</a>, republish as you wish. - Powered by <a href="http://nikola.ralsina.com.ar">Nikola</a>
</div>



            <script src="assets/js/jquery-1.7.2.min.js" type="text/javascript"></script>
            <script src="assets/js/bootstrap.min.js" type="text/javascript"></script>
        <script src="assets/js/jquery.colorbox-min.js" type="text/javascript"></script>


    <script type="text/javascript">jQuery("a.image-reference").colorbox({rel:"gal",maxWidth:"80%",maxHeight:"80%",scalePhotos:true});</script>
</body>
</html>